package com.scrapy4s.http

import org.scalatest.FunSuite

/**
  * Created by sheep3 on 2017/11/30.
  */
class RequestSpec extends FunSuite {
  test("request post json") {
    //    val res = Request("https://m.dianping.com/isoapi/module")
    //      .setJson("""{"pageEnName":"shopList","moduleInfoList":[{"moduleName":"mapiSearch","query":{"search":{"start":20,"categoryid":"10","parentCategoryId":10,"locatecityid":2,"limit":20,"sortid":"0","cityid":3,"range":"1","maptype":0,"mylat":39.975471399999996,"mylng":116.4894769},"loaders":["list"]}}]}""")
    //      .execute()
    //    println(res.body)
    //    assert(res.statusCode == 200)
    //  }
    //
    //  test("request get") {
    //    val res = Request("http://tool.oschina.net/codeformat/json").execute()
    //    println(res.xpath("""//title/text()""").headOption.getOrElse(""))
    //    assert(res.statusCode == 200)
  }

  test("request print") {
    println(Request("http://tool.oschina.net/codeformat/json").print)
    println(Request("https://m.dianping.com/isoapi/module").setJson("""{"pageEnName":"shopList","moduleInfoList":[{"moduleName":"mapiSearch","query":{"search":{"start":20,"categoryid":"10","parentCategoryId":10,"locatecityid":2,"limit":20,"sortid":"0","cityid":3,"range":"1","maptype":0,"mylat":39.975471399999996,"mylng":116.4894769},"loaders":["list"]}}]}""").print)
  }
}
